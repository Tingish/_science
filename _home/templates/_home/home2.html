{% extends 'base.html' %}
{% load mptt_tags %}

{% block title %}
 Homepage
{% endblock %}

{% block head %}
{% endblock %}

{% block content %}

	<div class="articlePreviewList">
	{% for StructureNode in top_article_list %}		

			<h2>{{ StructureNode.title }}</h2>
			<p>{{ StructureNode.pubDate|date }}</p>
			<div class="articlePreviewContainer">
				{% if StructureNode.getNearestAbstractImage %}<div class="previewThumbnail"><div class="contentContainerImage"><img src={{ StructureNode.getNearestAbstractImage.localSource.url }} alt="" /></div></div>
				<div class="previewParagraphWImage">{{ StructureNode.getNearestAbstractParagraph }}</div>
				{% else %}<div class="previewParagraph">{{ StructureNode.getNearestAbstractParagraph }}</div>{% endif %}
			</div>
		
	{% endfor %}
	</div>
	<div class="pagination">
	    <span class="step-links">
	    	{% if top_article_list.has_previous or top_article_list.has_next %}
	        {% if top_article_list.has_previous %}
	            <a href="?page={{ top_article_list.previous_page_number }}">previous</a>
	        {% endif %}
	
	        <span class="current">
	            Page {{ top_article_list.number }} of {{ top_article_list.paginator.num_pages }}.
	        </span>
	
	        {% if top_article_list.has_next %}
	            <a href="?page={{ top_article_list.next_page_number }}">next</a>
	        {% endif %}
	        {% endif %}
	    </span>
	</div>	
{% endblock %}